# 3D графика

Трехмерная графика нашла широкое применение в таких областях как научные расчеты, инженерное проектирование, компьютерное моделирование физических объектов.

Для создания реалистичной модели используются геометрические примитивы (куб, шар, конус и прочие), гладкие и сплайновые поверхности.

Вид поверхности определяется расположенной в пространтсве сеткой опорных точек. Каждой точке пристваивается коэффициент, величина которого определяет степень влияния на часть поверхности, проходящей вблизи точки. От взаимного расположения точек и величины коэффициентов зависит форма и гладкость поверхности в целом.

Деформация объекта обеспечивается перемещением контрольных точек, расположенных вблизи. Каждая контрольная точка связана с ближайшими опорными точками, степень ее влияния на них определяется удаленностью.

Следующий метод называют _сеткой деформации_. Вокруг объекта или его части размещается трехмерная сетка, перемещение любой точки которой вызывает упругую деформацию как самой сетки, так и окруженного объекта.

Еще однин способ построения объектов - _твердотельное моделирование_. Объекты представлены твердыми телами, которые при взаимодействии с другими телами различными способами (объединение, вычитание, слияние и прочие) претерпевают необходимую трансформацию.

Применение сложных математических моделей позволяет имитировать различные физические эффекты: взрывы, дождь, снег, огонь, дым, туман и прочие.

## Упрощенный вид пространственного моделирования объектов

1. Спроектировать и создать виртуальный каркас объекта, наиболее полно соответствующий его реальной форме

2. Спроектировать и создать виртуальные материалы, по физическим свойствам визуализации похожие на реальные

3. Присвоить материалы различным частям поверхности объекта

4. Настроить физические параметры пространства, в котором будет действовать объект, - задать освещение, гравитацию, свойства атмосферы, свойства взаимодействующих объектов и поверхностей

5. Задать траектории движения объектов

6. Рассчитать результирующую последовательность кадров

7. Наложить поверхностные эффекты на итоговый анимационный ролик

Закраска поверхностей осуществляется методами **Гуро (Gouraud)** или **Фонга (Phong)**. В первом случае цвет примитива рассчитывается лишь в его вершинах, а затем линейно интерполируется по поверхности. Во втором случае строится нормаль к объекту в целом, ее вектор интерполируется по поверхности составляющих примитивов и освещение рассчитывается для каждой точки.

Свет, уходящий с поверхности в конкретной точке в сторону наблюдателя, представляет собой сумму компонентов, умноженных на коэффициент, связанный с материалом и цветом поверхности в данной точке. К таковым компонентам относятся:

1. Свет, пришедший с обратной стороны поверхности, то есть преломленный свет (Refracted)

2. Свет, равномерно рассеиваемый поверхностью (Diffuse)

3. Зеркально отраженный свет (Reflected)

4. Блики, то есть отраженный свет источников (Specular)

5. Собственное свечение поверхности (Self Illumination)

После завершения конструирования и визуализации объекта приступают к его оживлению, то есть заданию параметров движения. Компьютерная анимация базируется на ключевых кадрах. В первом кадре объект выставляется в исходное положение. Через определенный промежуток задается новое положение объекта и так далее до конечного положения. Промежуточные значения вычисляет программа по специальному алгоритму. При этом происходит не просто линейная аппроксимация, а плавное изменение положения опорных точек объекта в соответствии с заданными условиями.

Эти условия определяются иерархией объектов (то есть законами их взаимодействия между собой), разрешенными плоскостями движения, предельными углами поворотов, величинами ускорений и скоростей. Такой подход называют методом инверсной кинематики движения. Он хорошо работает при моделировании механических устройств. В случае с имитацией живых объектов используют так называемые скелетные модели. То есть, создается некий каркас, подвижный в точках, характерных для моделируемого объекта. Движения точек просчитываются предыдущим методом. Затем на каркас накладывается оболочка, состоящая из смоделированных поверхностей, для которых каркас является набором контрольных точек, то есть создается каркасная модель. Каркасная модель визуализуется наложением поверхностных текстур с учетом условий освещения. В ходе перемещения объекта получается весьма правдоподобная имитация движений живых существ. Наиболее совершенный метод анимации заключается в фиксации реальных движений физического объекта. Например, на человеке закрепляют в контрольных точках яркие источники света и снимают заданное движение на видео- или кинопленку. Затем координаты точек по кадрам переводят с пленки в компьютер и присваивают соответствующим опорным точкам каркасной модели. В результате движения имитируемого объекта практически неотличимы от живого прототипа.

Процесс расчета реалистичных изображений называют рендерингом (визуализацией). Большинство современных программ рендеринга основаны на методе обратной трассировки лучей (Backway Ray Tracing). Применение сложных математических моделей позволяет имитировать такие физические эффекты, как взрывы, дождь, огонь, дым, туман. По завершению визуализации компьютерную трехмерную анимацию используют либо как самостоятельный продукт, либо в качестве отдельных частей или кадров готового продукта.

Особую область трехмерного моделирования в режиме реального времени составляют тренажеры технических средств — автомобилей, судов, летательных и космических аппаратов. В них необходимо очень точно реализовывать технические параметры объектов и свойства окружающей физической среды. В более простых вариантах, например при обучении вождению наземных транспортных средств, тренажеры реализуют на персональных компьютерах.

Самые совершенные на сегодняшний день устройства созданы для обучения пилотированию космических кораблей и военных летательных аппаратов. Моделированием И визуализацией объектов в таких тренажерах заняты несколько специалиpзированных графических станций, построенных на мощных и скоростных видеоадаптерах с аппаратными ускорителями трехмерной графики. Общее управление системой и просчет сценариев взаимодействия возложены на суперкомпьютер, состоящий из десятков и сотен процессоров. Стоимость таких комплексов выражается девятизначными цифрами, но их применение окупается достаточно быстро, так как обучение на реальных аппаратах в десятки раз дороже.

## Программные средства обработки трёхмерной графики

Платные:
- 3D studio max
- Softimage 3D
- Maya

Бесплатные:
- Blender